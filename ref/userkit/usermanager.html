
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UserManager &#8212; Webware for Python 3 3.0.2 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="UserManagerToFile" href="usermanagertofile.html" />
    <link rel="prev" title="User" href="user.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-UserKit.UserManager">
<span id="usermanager"></span><h1>UserManager<a class="headerlink" href="#module-UserKit.UserManager" title="Permalink to this headline">¶</a></h1>
<p>The abstract UserManager class.</p>
<dl class="py class">
<dt id="UserKit.UserManager.UserManager">
<em class="property">class </em><code class="sig-prename descclassname">UserKit.UserManager.</code><code class="sig-name descname">UserManager</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">userClass</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The base class for all user manager classes.</p>
<p>A UserManager manages a set of users including authentication,
indexing and persistence. Keep in mind that UserManager is abstract;
you must always use a concrete subclasses like UserManagerToFile
(but please read the rest of this docstring).</p>
<p>You can create a user through the manager (preferred):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">createUser</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
</pre></div>
</div>
<p>Or directly through the user class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="n">RoleUser</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
<span class="n">manager</span><span class="o">.</span><span class="n">addUser</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<p>The manager tracks users by whether or not they are “active”
(e.g., logged in) and indexes them by:</p>
<blockquote>
<div><ul class="simple">
<li><p>user serial number</p></li>
<li><p>external user id</p></li>
<li><p>user name</p></li>
</ul>
</div></blockquote>
<p>These methods provide access to the users by these keys:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">userForSerialNum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serialNum</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">NoDefault</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">userForExternalId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extId</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">NoDefault</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">userForName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">NoDefault</span><span class="p">)</span>
</pre></div>
</div>
<p>UserManager provides convenient methods for iterating through the
various users. Each method returns an object that can be used in a
for loop and asked for its len():</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">users</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">activeUsers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">inactiveUsers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p>You can authenticate a user by passing the user object and attempted
password to login(). If the authentication is successful, then login()
returns the User, otherwise it returns None:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="n">mgr</span><span class="o">.</span><span class="n">userForExternalId</span><span class="p">(</span><span class="n">externalId</span><span class="p">)</span>
<span class="k">if</span> <span class="n">mgr</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">doSomething</span><span class="p">()</span>
</pre></div>
</div>
<p>As a convenience, you can authenticate by passing the serialNum,
externalId or name of the user:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">loginSerialNum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serialNum</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">loginExternalId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">externalId</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">loginName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">userName</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
</pre></div>
</div>
<p>The user will automatically log out after a period of inactivity
(see below), or you can make it happen with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">logout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
</pre></div>
</div>
<p>There are three user states that are important to the manager:</p>
<blockquote>
<div><ul class="simple">
<li><p>modified</p></li>
<li><p>cached</p></li>
<li><p>authenticated or “active”</p></li>
</ul>
</div></blockquote>
<p>A modified user is one whose data has changed and eventually requires
storage to a persistent location. A cached user is a user whose data
resides in memory (regardless of the other states). An active user
has been authenticated (e.g., their username and password were checked)
and has not yet logged out or timed out.</p>
<p>The manager keeps three timeouts, expressed in minutes, to:</p>
<blockquote>
<div><ul class="simple">
<li><p>save modified users after a period of time following the first
unsaved modification</p></li>
<li><p>push users out of memory after a period of inactivity</p></li>
<li><p>deactivate (e.g., log out) users after a period of inactivity</p></li>
</ul>
</div></blockquote>
<p>The methods for managing these values deal with the timeouts as
number-of-minutes. The default values and the methods are:</p>
<blockquote>
<div><ul class="simple">
<li><p>20  modifiedUserTimeout()  setModifiedUserTimeout()</p></li>
<li><p>20  cachedUserTimeout()    setCachedUserTimeout()</p></li>
<li><p>20  activeUserTimeout()    setActiveUserTimeout()</p></li>
</ul>
</div></blockquote>
<p>Subclasses of UserManager provide persistence such as to the file
system or a MiddleKit store. Subclasses must implement all methods
that raise AbstractErrors. Subclasses typically override (while still
invoking super) addUser().</p>
<p>Subclasses should ensure “uniqueness” of users. For example, invoking
any of the userForSomething() methods repeatedly should always return
the same user instance for a given key. Without uniqueness, consistency
issues could arise with users that are modified.</p>
<p>Please read the method docstrings and other class documentation to
fully understand UserKit.</p>
<dl class="py method">
<dt id="UserKit.UserManager.UserManager.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">userClass</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.activeUserTimeout">
<code class="sig-name descname">activeUserTimeout</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.activeUserTimeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.activeUsers">
<code class="sig-name descname">activeUsers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.activeUsers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all active users.</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.addUser">
<code class="sig-name descname">addUser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.addUser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.cachedUserTimeout">
<code class="sig-name descname">cachedUserTimeout</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.cachedUserTimeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.clearCache">
<code class="sig-name descname">clearCache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.clearCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cache of the manager.</p>
<p>Use with extreme caution. If your program maintains a reference
to a user object, but the manager loads in a new copy later on,
then consistency problems could occur.</p>
<p>The most popular use of this method is in the regression test suite.</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.createUser">
<code class="sig-name descname">createUser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">password</span></em>, <em class="sig-param"><span class="n">userClass</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.createUser" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a newly created user that is added to the manager.</p>
<p>If userClass is not specified, the manager’s default user class
is instantiated. This not imply that the user is logged in.
This method invokes self.addUser().</p>
<p>See also: userClass(), setUserClass()</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.inactiveUsers">
<code class="sig-name descname">inactiveUsers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.inactiveUsers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.login">
<code class="sig-name descname">login</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em>, <em class="sig-param"><span class="n">password</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.login" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the user if login is successful, otherwise return None.</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.loginExternalId">
<code class="sig-name descname">loginExternalId</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">externalId</span></em>, <em class="sig-param"><span class="n">password</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.loginExternalId" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.loginName">
<code class="sig-name descname">loginName</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">userName</span></em>, <em class="sig-param"><span class="n">password</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.loginName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.loginSerialNum">
<code class="sig-name descname">loginSerialNum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">serialNum</span></em>, <em class="sig-param"><span class="n">password</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.loginSerialNum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.logout">
<code class="sig-name descname">logout</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.logout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.modifiedUserTimeout">
<code class="sig-name descname">modifiedUserTimeout</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.modifiedUserTimeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.numActiveUsers">
<code class="sig-name descname">numActiveUsers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.numActiveUsers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of active users (e.g. the logged in users).</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.setActiveUserTimeout">
<code class="sig-name descname">setActiveUserTimeout</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.setActiveUserTimeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.setCachedUserTimeout">
<code class="sig-name descname">setCachedUserTimeout</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.setCachedUserTimeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.setModifiedUserTimeout">
<code class="sig-name descname">setModifiedUserTimeout</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.setModifiedUserTimeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.setUserClass">
<code class="sig-name descname">setUserClass</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">userClass</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.setUserClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the userClass, which cannot be None and must inherit from User.</p>
<p>See also: userClass().</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.shutDown">
<code class="sig-name descname">shutDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.shutDown" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform any tasks necessary to shut down the user manager.</p>
<p>Subclasses may override and must invoke super as their <em>last</em> step.</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.userClass">
<code class="sig-name descname">userClass</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.userClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the userClass, which is used by createUser.</p>
<p>The default value is UserKit.User.User.</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.userForExternalId">
<code class="sig-name descname">userForExternalId</code><span class="sig-paren">(</span><em class="sig-param">externalId</em>, <em class="sig-param">default=&lt;class 'MiscUtils.NoDefault'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.userForExternalId" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the user with the given external id.</p>
<p>The user record is pulled into memory if needed.</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.userForName">
<code class="sig-name descname">userForName</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">default=&lt;class 'MiscUtils.NoDefault'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.userForName" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the user with the given name.</p>
<p>The user record is pulled into memory if needed.</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.userForSerialNum">
<code class="sig-name descname">userForSerialNum</code><span class="sig-paren">(</span><em class="sig-param">serialNum</em>, <em class="sig-param">default=&lt;class 'MiscUtils.NoDefault'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.userForSerialNum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the user with the given serialNum.</p>
<p>The user record is pulled into memory if needed.</p>
</dd></dl>

<dl class="py method">
<dt id="UserKit.UserManager.UserManager.users">
<code class="sig-name descname">users</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#UserKit.UserManager.UserManager.users" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all users (regardless of login status).</p>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Webware for Python 3</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">List of Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright and License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Beginner Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appdev.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">Plug-ins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../style.html">Style Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../psp.html">PSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userkit.html">UserKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskkit.html">TaskKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../webutils.html">WebUtils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../miscutils.html">MiscUtils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing.html">Testing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core/index.html">Core Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../psp/index.html">PSP</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">UserKit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../taskkit/index.html">TaskKit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webutils/index.html">WebUtils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscutils/index.html">MiscUtils</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">API Reference</a><ul>
  <li><a href="index.html">UserKit</a><ul>
      <li>Previous: <a href="user.html" title="previous chapter">User</a></li>
      <li>Next: <a href="usermanagertofile.html" title="next chapter">UserManagerToFile</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;1999-2021, Christoph Zwerschke et al.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/ref/userkit/usermanager.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>